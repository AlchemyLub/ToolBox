<Project>

  <Target Name="GenerateSettingsKeys" BeforeTargets="BeforeBuild" 
          Condition="'$(DesignTimeBuild)' != 'true' AND '$(SettingsCodeGenDisabled)' != 'true'">

    <SettingsCodeGenTask
      SettingsProjectDir="$(SettingsProjectDir)"
      SettingsNamespaceName="$(SettingsNamespaceName)"
      SettingsClassName="$(SettingsClassName)" />

    <ItemGroup>
      <GeneratedFile Include="$(MSBuildProjectDirectory)\Generated\$(SettingsClassName).g.cs" />
      <Compile Include="@(GeneratedFile)" Condition="Exists('%(FullPath)')" />
    </ItemGroup>
  </Target>

</Project>
